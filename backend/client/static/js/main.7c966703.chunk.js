(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,n){e.exports=n(175)},110:function(e,t,n){},111:function(e,t,n){},158:function(e,t){},175:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(8),r=n.n(c),i=(n(110),n(111),n(58)),s=n(29),l=n(59),u=n.n(l),m=n(89),d=n(23),p=n(92),g=n(93),f=n.n(g),h=n(94),w=n.n(h),b=n(200),E=function(e){var t=e.map,n=e.position,a=e.children,r=Object(o.useMemo)((function(){return document.createElement("div")}),[]);return Object(o.useEffect)((function(){t&&n&&t.controls[n].push(r)}),[t,n]),Object(c.createPortal)(a,r)},O=n(198),v=n(201),j=n(195),k=n(199),y=n(204),S=n(203),P=function(e){var t=e.order;return o.createElement(j.a,null,o.createElement(O.a,null,o.createElement(v.a,null,o.createElement(k.a,null,o.createElement(S.a,{src:"https://avatars2.githubusercontent.com/u/4926329?s=460&v=4"})),o.createElement(y.a,{primary:t.driver_name,secondary:function(e){switch(e){case 1:return"Pedido Pendente";case 2:return"Pedido Entregue"}}(t.status)})),o.createElement(v.a,null,o.createElement(y.a,{secondary:"Local de entrega: Destino ".concat(t.location_id)}))))},x=n(45),M=new p.Loader("AIzaSyBOHv-nSvJ_yMHKS4HyMDB9Owk4DEYl47s"),B=w()("http://localhost:3001"),I=function(){var e=Object(s.f)().id,t=Object(o.useState)(),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)(),i=Object(d.a)(r,2),l=i[0],p=i[1],g=Object(o.useState)(),h=Object(d.a)(g,2),w=h[0],O=h[1],v=Object(o.useState)(),j=Object(d.a)(v,2),k=j[0],y=j[1],S=Object(o.useState)(),I=Object(d.a)(S,2),_=I[0],D=I[1],H=Object(x.useSnackbar)();return Object(o.useEffect)((function(){function t(){return(t=Object(m.a)(u.a.mark((function t(){var n,o,a,r,i,s,l,m,g;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("".concat("http://localhost:3001","/orders/").concat(e));case 2:return n=t.sent,o=n.data,c(o),a=Object(d.a)(o.location_geo,2),r=a[0],i=a[1],s={lat:parseFloat(r),lng:parseFloat(i)},t.next=9,M.load();case 9:window.google=t.sent,l=new window.google.maps.Map(document.getElementById("map"),{center:s,zoom:15}),m=new window.google.maps.Marker({title:"In\xedcio",icon:"http://maps.google.com/mapfiles/kml/pal4/icon7.png"}),g=new window.google.maps.Marker({position:s,map:l,title:"Destino"}),p(l),O(m),y(g);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(o.useEffect)((function(){B.on("order.".concat(e,".new-position"),(function(e){console.log(e),D(e)}))}),[e]),Object(o.useEffect)((function(){if(l&&_)if(0!==_.lat||0!==_.lng){w.setPosition({lat:_.lat,lng:_.lng}),w.setMap(l);var e=new window.google.maps.LatLngBounds;e.extend(w.getPosition()),e.extend(k.getPosition()),l.fitBounds(e)}else H.enqueueSnackbar("Motorista chegou no destino",{variant:"success",anchorOrigin:{horizontal:"right",vertical:"bottom"}})}),[l,_]),o.createElement("div",{id:"map",style:{width:"100%",height:"100%"}},l&&o.createElement(E,{map:l,position:window.google.maps.ControlPosition.TOP_RIGHT},o.createElement(b.a,{m:"10px"},o.createElement(P,{order:a}))))};var _=function(){return a.a.createElement(x.SnackbarProvider,null,a.a.createElement(i.a,{basename:"/client"},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/orders/:id/mapping",component:I,exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.7c966703.chunk.js.map